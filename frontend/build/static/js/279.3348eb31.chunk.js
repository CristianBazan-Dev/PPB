"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[279],{4514:function(e,c,t){t.r(c),t.d(c,{default:function(){return x}});var n=t(4165),s=t(5861),r=t(3433),i=t(9439),a=t(2791),d=t(1243),o=(t(4904),t.p,t(7541)),u=t(8077),l=t(8348),h=t(1087),p=t(184);var x=function(e){var c=(0,a.useContext)(o.q),t=(0,i.Z)(c.productsAPI.products,2),x=t[0],f=t[1],j=(0,i.Z)(c.userAPI.isAdmin,1)[0],m=(0,i.Z)(c.token,1)[0],k=(0,i.Z)(c.productsAPI.callback,2),v=k[0],Z=k[1],b=(0,a.useState)(!1),A=(0,i.Z)(b,2),N=A[0],g=A[1],C=(0,a.useState)(!1),_=(0,i.Z)(C,2),w=_[0],E=_[1],P=function(e){x.forEach((function(c){c._id===e&&(c.checked=!c.checked)})),f((0,r.Z)(x))},y=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(c,t){var s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),s=d.Z.post("/api/destroy",{public_id:t},{headers:{Authorization:m}}),r=d.Z.delete("/api/products/".concat(c),{headers:{Authorization:m}}),e.next=6,s;case 6:return e.next=8,r;case 8:Z(!v),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(c,t){return e.apply(this,arguments)}}();return N?(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,{})}):(0,p.jsx)("div",{className:"new-products-page",children:(0,p.jsx)("div",{className:"products-background",children:(0,p.jsxs)("div",{className:"main-form",children:[(0,p.jsxs)("div",{className:"products-titles",children:[(0,p.jsx)("h1",{children:"\xa1Lo \xfaltimo!"}),(0,p.jsx)("h3",{})]}),j&&(0,p.jsxs)("div",{className:"delete-all",children:[(0,p.jsx)("span",{children:"Seleccionar todo"}),(0,p.jsx)("input",{type:"checkbox",checked:w,onChange:function(){x.forEach((function(e){e.checked=!w})),f((0,r.Z)(x)),E(!w)}}),(0,p.jsx)("button",{onClick:function(){x.forEach((function(e){e.checked&&y(e._id,e.images.public_id)}))},children:"Eliminar todo"})]}),0===x.length&&(0,p.jsx)(u.Z,{}),(0,p.jsx)("div",{className:"products",children:x.map((function(e){return(0,p.jsx)(h.rU,{to:"/detail/".concat(e._id),children:(0,p.jsx)(l.Z,{product:e,isAdmin:j,deleteProduct:y,handleCheck:P},e._id)})}))}),(0,p.jsx)("div",{className:"button-see-more",children:(0,p.jsx)(h.rU,{to:"/products",children:(0,p.jsx)("button",{children:"Ver m\xe1s"})})})]})})})}}}]);
//# sourceMappingURL=279.3348eb31.chunk.js.map