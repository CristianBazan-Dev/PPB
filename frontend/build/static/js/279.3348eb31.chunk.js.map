{"version":3,"file":"static/js/279.3348eb31.chunk.js","mappings":"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","sources":["components/mainpages/utils/newProducts/NewProducts.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./newProducts.css\";\n\nimport MainBackground from \"./Bg Products - Universe.png\";\nimport Stars from \"./Estrellas.png\";\nimport { GlobalState } from \"../../../../GlobalState\";\nimport Loading from \"../loading/Loading\";\nimport ProductItem from \"../productItem/ProductItem\";\nimport { Link } from \"react-router-dom\";\n\nfunction NewProducts(props) {\n  const state = useContext(GlobalState);\n\n  const [products, setProducts] = state.productsAPI.products;\n\n  const [isAdmin] = state.userAPI.isAdmin;\n\n  const [token] = state.token;\n  const [callback, setCallback] = state.productsAPI.callback;\n  const [loading, setLoading] = useState(false);\n  const [isCheck, setIsCheck] = useState(false);\n\n  const handleCheck = (id) => {\n    products.forEach((product) => {\n      if (product._id === id) product.checked = !product.checked;\n    });\n    setProducts([...products]);\n  };\n\n  const deleteProduct = async (id, public_id) => {\n    try {\n      setLoading(true);\n\n      const destroyImg = axios.post(\n        \"/api/destroy\",\n        { public_id },\n        {\n          headers: { Authorization: token },\n        }\n      );\n\n      const deleteProduct = axios.delete(`/api/products/${id}`, {\n        headers: { Authorization: token },\n      });\n\n      await destroyImg;\n      await deleteProduct;\n      setCallback(!callback);\n      setLoading(false);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  const checkAll = () => {\n    products.forEach((product) => {\n      product.checked = !isCheck;\n    });\n    setProducts([...products]);\n    setIsCheck(!isCheck);\n  };\n\n  const deleteAll = () => {\n    products.forEach((product) => {\n      if (product.checked) deleteProduct(product._id, product.images.public_id);\n    });\n  };\n\n  if (loading)\n    return (\n      <div>\n        <Loading />\n      </div>\n    );\n\n  return (\n    <div className=\"new-products-page\">\n      <div className=\"products-background\">\n        <div className=\"main-form\">\n          <div className=\"products-titles\">\n            <h1>¡Lo último!</h1>\n            <h3></h3>\n          </div>\n\n          {isAdmin && (\n            <div className=\"delete-all\">\n              <span>Seleccionar todo</span>\n              <input type=\"checkbox\" checked={isCheck} onChange={checkAll} />\n              <button onClick={deleteAll}>Eliminar todo</button>\n            </div>\n          )}\n\n          {products.length === 0 && <Loading />}\n          <div className=\"products\">\n          \n\n            {products.map((product) => {\n              return (\n                <Link to={`/detail/${product._id}`}>\n                  <ProductItem\n                    key={product._id}\n                    product={product}\n                    isAdmin={isAdmin}\n                    deleteProduct={deleteProduct}\n                    handleCheck={handleCheck}\n                  />\n                </Link>\n              );\n            })}\n          </div>\n\n          <div className=\"button-see-more\">\n            <Link to=\"/products\">\n              <button>Ver más</button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default NewProducts;\n"],"names":["props","state","useContext","GlobalState","_state$productsAPI$pr","_slicedToArray","productsAPI","products","setProducts","isAdmin","userAPI","token","_state$productsAPI$ca","callback","setCallback","_useState","useState","_useState2","loading","setLoading","_useState3","_useState4","isCheck","setIsCheck","handleCheck","id","forEach","product","_id","checked","_toConsumableArray","deleteProduct","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","public_id","destroyImg","_deleteProduct","wrap","_context","prev","next","axios","headers","Authorization","concat","t0","alert","response","data","msg","stop","_x","_x2","apply","arguments","_jsx","children","Loading","className","_jsxs","type","onChange","onClick","images","length","map","Link","to","ProductItem"],"sourceRoot":""}